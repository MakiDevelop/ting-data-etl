# Decision Log

> 記錄「為什麼做這個選擇」，而非只是「做了什麼」

---

## 格式範本

```markdown
### [日期] 決策標題

**情境**：描述當時面臨的狀況

**選項**：
1. 選項 A - 優缺點
2. 選項 B - 優缺點

**決策**：選擇了什麼

**理由**：為什麼這樣選

**後續**：需要追蹤或回補的事項（如有）
```

---

## 決策記錄

### 2026-01-21 建立四方協作準則 v2.0

**情境**：專案需要定義 Human / Claude / Gemini / Codex 四方協作模式

**決策**：採用 CLAUDE.md 作為協作憲法，並建立本 decision-log

**理由**：
- 確保 AI 協作有明確邊界與規則
- 減少重複討論同一問題
- 讓未來的自己和 AI 都能理解決策脈絡

**後續**：持續依據重要決策更新本文件

---

### 2026-01-22 決定建立泛用型 CSV 處理服務

**情境**：專案累積多個 CSV 資料轉換腳本（fan_out、aggregate、hash_mapper 等），考慮是否 Web 化讓非技術人員也能使用

**選項**：

1. 將現有腳本直接 Web 化 - 工時短，但只解決特定問題
2. 建立泛用型 CSV 處理服務 - 工時長，但可解決更廣泛的需求
3. 使用 Gooey 做桌面 GUI - 改動最少，但需安裝 Python

**決策**：選擇 **選項 2 - 建立泛用型 CSV 處理服務**

**技術選型決策**：

| 決策點 | 選擇 | 理由 |
| ------ | ---- | ---- |
| 目標用戶 | 內部團隊 | 不需外部 API 整合 |
| UI 框架 | Streamlit | Python 原生、快速開發 |
| MVP UI | 表單式 | 穩定優先，Phase 3 再上拖曳 |
| 現有腳本 | 作為可選模板 | 保留彈性、漸進式遷移 |
| 大檔支援 | Phase 1 就做 | 「打不開 Excel」是核心痛點 |
| 運算引擎 | DuckDB | 大檔效能優勢，可直接查詢 CSV 不載入記憶體 |

**諮詢來源**：

- Gemini：技術選型建議（Mito、DuckDB、React Flow）
- Codex：架構設計、工時估算、實作風險評估

**理由**：

- 使用者痛點有兩種：單一大檔打不開、批次多檔處理
- 泛用型服務可一次解決兩種痛點
- 現有腳本可作為模板整合，不浪費已有投資
- DuckDB 可處理 500MB+ CSV 而不爆記憶體

**後續**：

- 規格書已輸出至 `LookerMCP-abd-webtools-CSVTools.md`
- 交由 LookerMCP 專案的 agents 實作
- 預估工時：MVP 3 週、完整版 7.5 週

---

<!-- 新決策請加在這裡 -->
